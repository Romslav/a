<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–æ—è–ª—å–Ω–æ—Å—Ç—å | –†–µ—Å—Ç–æ—Ä–∞–Ω</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Preloader -->
    <div id="preloader" class="preloader">
        <div class="spinner"></div>
        <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞—à—É –ª–æ—è–ª—å–Ω–æ—Å—Ç—å...</p>
    </div>

    <!-- Navbar -->
    <nav class="navbar">
        <img src="icons/menu.svg" id="menuBtn" class="nav-icon" alt="–ú–µ–Ω—é" width="24" height="24">
        <h2 id="pageTitle">–õ–æ—è–ª—å–Ω–æ—Å—Ç—å</h2>
        <img src="icons/menu.svg" id="notifBtn" class="nav-icon" alt="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" width="24" height="24">
    </nav>

    <!-- Main Content -->
    <main id="mainContent">
        <!-- üè† –ì–õ–ê–í–ù–ê–Ø -->
        <div id="dashboardScreen" class="screen active" data-nav="dashboard">
            <div class="profile-header">
                <div class="avatar" id="userAvatar">üë§</div>
                <div class="profile-info">
                    <h1 id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</h1>
                    <div class="status-badge" id="statusBadge">ü•â –ë—Ä–æ–Ω–∑–∞</div>
                </div>
            </div>

            <div class="balance-card">
                <div class="balance-value" id="balanceValue">1,240</div>
                <div class="balance-label">–±–∞–ª–ª–æ–≤ = <span id="rublesValue">1,240‚ÇΩ</span></div>
                <div class="progress-container">
                    <div class="progress-label">
                        –î–æ <span id="nextLevelName">–°–µ—Ä–µ–±—Ä–∞</span>: 
                        <span id="nextLevelPoints">760</span> –±–∞–ª–ª–æ–≤
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </div>

            <div class="quick-actions">
                <button class="action-btn primary" onclick="loyaltyApp.showScreen('checkinScreen')">
                    <img src="icons/camera.svg" class="action-icon" alt="–ö–∞–º–µ—Ä–∞" width="20" height="20"/>
                    <span>–ù–∞—á–∏—Å–ª–∏—Ç—å –±–æ–Ω—É—Å—ã</span>
                </button>
                <button class="action-btn secondary" onclick="loyaltyApp.showScreen('spendScreen')">
                    <img src="icons/wallet.svg" class="action-icon" alt="–ö–æ—à–µ–ª–µ–∫" width="20" height="20"/>
                    <span>–ü–æ—Ç—Ä–∞—Ç–∏—Ç—å –±–∞–ª–ª—ã</span>
                </button>
                <button class="action-btn accent" onclick="loyaltyApp.showScreen('qrCardScreen')">
                    <img src="icons/card.svg" class="action-icon" alt="–ö–∞—Ä—Ç–∞" width="20" height="20"/>
                    <span>–ú–æ—è –∫–∞—Ä—Ç–∞</span>
                </button>
            </div>

            <div class="next-reward">
                <img src="icons/gift.svg" class="reward-icon" alt="–ü–æ–¥–∞—Ä–æ–∫" width="32" height="32"/>
                <div class="reward-text">–ï—â–µ 2 –≤–∏–∑–∏—Ç–∞ ‚Äî –¥–µ—Å–µ—Ä—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫!</div>
            </div>
        </div>

        <!-- üì∏ –ù–ê–ß–ò–°–õ–ï–ù–ò–ï -->
        <div id="checkinScreen" class="screen" data-nav="checkin">
            <div class="checkin-methods">
                <button class="method-btn active" data-method="qr">
                    <img src="icons/camera.svg" class="method-icon" alt="QR" width="20" height="20"/>
                    –ß–µ—Ä–µ–∑ –∫–∞—Å—Å—É (QR)
                </button>
                <button class="method-btn" data-method="manual">
                    <img src="icons/wallet.svg" class="method-icon" alt="–ß–µ–∫" width="20" height="20"/>
                    –í–≤–µ—Å—Ç–∏ —á–µ–∫ –≤—Ä—É—á–Ω—É—é
                </button>
            </div>
            
            <div id="qrScanner" class="scanner-placeholder">
                <div class="scanner-frame"></div>
                <p>–ü–æ–∫–∞–∑–∞—Ç—å QR –∫–∞—Å—Å–∏—Ä—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è</p>
            </div>
            
            <div id="manualInput" class="input-form hidden">
                <input type="number" id="checkAmount" placeholder="–°—É–º–º–∞ —á–µ–∫–∞, ‚ÇΩ (–º–∏–Ω–∏–º—É–º 100)" min="100">
                <button class="btn-full primary" onclick="loyaltyApp.processManualCheck()">–ù–∞—á–∏—Å–ª–∏—Ç—å –±–æ–Ω—É—Å—ã</button>
            </div>
        </div>

        <!-- üí∞ –°–ü–ò–°–ê–ù–ò–ï -->
        <div id="spendScreen" class="screen" data-nav="spend">
            <div class="spend-tabs">
                <button class="tab-btn active" data-tab="discount">–°–∫–∏–¥–∫–∞</button>
                <button class="tab-btn" data-tab="rewards">–ü–æ–¥–∞—Ä–∫–∏</button>
            </div>
            
            <div id="discountTab" class="tab-content active">
                <div class="slider-container">
                    <input type="range" id="discountSlider" min="50" max="1000" value="100" step="50">
                    <div class="slider-value">
                        <span id="discountAmount">100</span> –±–∞–ª–ª–æ–≤ = <span id="discountRub">100‚ÇΩ</span>
                    </div>
                </div>
                <canvas id="discountQR" class="qr-code-lg" width="220" height="220"></canvas>
                <p class="qr-hint">–ü–æ–∫–∞–∂–∏—Ç–µ QR-–∫–æ–¥ –Ω–∞ –∫–∞—Å—Å–µ</p>
            </div>
            
            <div id="rewardsTab" class="tab-content">
                <div class="rewards-grid">
                    <div class="reward-item" onclick="loyaltyApp.redeemReward('coffee')">
                        <img src="icons/gift.svg" class="reward-img" alt="–ö–æ—Ñ–µ" width="48" height="48"/>
                        <div>–ö–æ—Ñ–µ –≤ –ø–æ–¥–∞—Ä–æ–∫</div>
                        <div class="reward-cost">200 –±–∞–ª–ª–æ–≤</div>
                    </div>
                    <div class="reward-item" onclick="loyaltyApp.redeemReward('dessert')">
                        <img src="icons/gift.svg" class="reward-img" alt="–î–µ—Å–µ—Ä—Ç" width="48" height="48"/>
                        <div>–î–µ—Å–µ—Ä—Ç</div>
                        <div class="reward-cost">400 –±–∞–ª–ª–æ–≤</div>
                    </div>
                    <div class="reward-item" onclick="loyaltyApp.redeemReward('wine')">
                        <img src="icons/gift.svg" class="reward-img" alt="–í–∏–Ω–æ" width="48" height="48"/>
                        <div>–í–∏–Ω–æ</div>
                        <div class="reward-cost">2000 –±–∞–ª–ª–æ–≤</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ü™™ –ö–ê–†–¢–ê -->
        <div id="qrCardScreen" class="screen" data-nav="qr-card">
            <div class="card-header">
                <h3>ü™™ –í–∞—à–∞ –∫–∞—Ä—Ç–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏</h3>
                <div class="status-large" id="statusLarge">ü•â –ë—Ä–æ–Ω–∑–∞</div>
            </div>
            <canvas id="loyaltyQR" class="qr-code-xl" width="280" height="280"></canvas>
            <div class="card-id">
                ID: <strong id="cardId">R-LOY-12345</strong>
            </div>
            <p class="card-hint">–ü–æ–∫–∞–∂–∏—Ç–µ –Ω–∞ –∫–∞—Å—Å–µ –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è/—Å–ø–∏—Å–∞–Ω–∏—è –±–æ–Ω—É—Å–æ–≤</p>
        </div>

        <!-- üìä –ò–°–¢–û–†–ò–Ø -->
        <div id="historyScreen" class="screen" data-nav="history">
            <div id="historyList" class="history-list"></div>
        </div>

        <!-- üë§ –ü–†–û–§–ò–õ–¨ -->
        <div id="profileScreen" class="screen" data-nav="profile">
            <div class="profile-form">
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" id="phoneInput" placeholder="+7 (999) 123-45-67">
                </div>
                <button class="btn-full primary" onclick="loyaltyApp.saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <button class="nav-item active" data-nav="dashboard">
            <img src="icons/home.svg" class="nav-icon-svg" alt="–ì–ª–∞–≤–Ω–∞—è" width="24" height="24"/>
            <div>–ì–ª–∞–≤–Ω–∞—è</div>
        </button>
        <button class="nav-item" data-nav="promos">
            <img src="icons/gift.svg" class="nav-icon-svg" alt="–ê–∫—Ü–∏–∏" width="24" height="24"/>
            <div>–ê–∫—Ü–∏–∏</div>
        </button>
        <button class="nav-item" data-nav="qr-card">
            <img src="icons/card.svg" class="nav-icon-svg" alt="–ö–∞—Ä—Ç–∞" width="24" height="24"/>
            <div>–ö–∞—Ä—Ç–∞</div>
        </button>
        <button class="nav-item" data-nav="history">
            <img src="icons/history.svg" class="nav-icon-svg" alt="–ò—Å—Ç–æ—Ä–∏—è" width="24" height="24"/>
            <div>–ò—Å—Ç–æ—Ä–∏—è</div>
        </button>
        <button class="nav-item" data-nav="profile">
            <img src="icons/profile.svg" class="nav-icon-svg" alt="–ü—Ä–æ—Ñ–∏–ª—å" width="24" height="24"/>
            <div>–ü—Ä–æ—Ñ–∏–ª—å</div>
        </button>
    </div>

    <script src="app.js"></script>
</body>
</html>
